<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ø­Ø¬Ø² - ØµØ§Ù„ÙˆÙ† Ù„Ù…Ø³Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<style>
body { margin:0; font-family:'Cairo',sans-serif; background:#111; color:#fff; }
.top-logo { display:flex; align-items:center; justify-content:center; gap:10px; padding:15px 0; background:#222; position:sticky; top:0; z-index:1000; box-shadow:0 2px 5px rgba(0,0,0,0.3);}
.top-logo.shrink { padding:5px 0; }
.top-logo .logo-img { height:60px; width:60px; border-radius:50%; object-fit:cover; transition:all 0.3s ease; box-shadow:0 4px 8px rgba(0,0,0,0.4); border:2px solid #ffcc00;}
.top-logo.shrink .logo-img { height:40px; width:40px; }
.top-logo .logo-text { font-size:2rem; font-weight:bold; color:#fff; transition: font-size 0.3s ease;}
.top-logo.shrink .logo-text { font-size:1.5rem;}
.navbar { display:flex; align-items:center; justify-content:space-between; padding:10px 20px; background:#222; position:relative; }
.nav-links { display:flex; gap:20px; list-style:none;}
.nav-links a { color:#fff; text-decoration:none; font-size:1rem; }
.menu-toggle { display:none; background:none; border:none; font-size:1.5rem; color:#fff; cursor:pointer; }
@media (max-width:768px){ .nav-links { display:none; flex-direction:column; background:#222; position:absolute; top:70px; right:0; width:200px; padding:10px; border-radius:5px; z-index:999;}
.nav-links.show { display:flex;}
.menu-toggle { display:block; } }

.booking-form { max-width:600px; margin:40px auto; background:#222; padding:25px; border-radius:12px; box-shadow:0 0 15px rgba(255,204,0,0.2);}
.booking-form h2 { text-align:center; color:gold; margin-bottom:20px; }
.booking-form .form-inner { display:flex; flex-direction:column; gap:15px; padding:0 10px; box-sizing:border-box; }
.booking-form label { text-align:right; color:gold;}
.booking-form input, .booking-form select { width:100%; padding:10px; background:#111; border:1px solid #444; border-radius:6px; color:#fff; box-sizing:border-box;}

.barbers { display:flex; justify-content:center; gap:15px; flex-wrap:wrap;}
.barber-card { text-align:center; cursor:pointer; transition:transform 0.3s ease, box-shadow 0.3s ease;}
.barber-card img { width:80px; height:80px; border-radius:50%; border:2px solid #444; object-fit:cover; transition:all 0.3s ease;}
.barber-card.selected img { border-color:gold; box-shadow:0 0 15px gold;}
.barber-card p { margin-top:5px; color:#fff;}

#availability-msg { color:red; font-weight:bold; display:none; margin:0; padding:5px 0; }

.timeslots { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-top:10px; }
.slot { padding:10px 12px; border-radius:8px; cursor:pointer; color:#111; transition:0.3s; border:1px solid #444;}
.slot.available { background:#228B22; }
.slot.booked { background:#990000; cursor:not-allowed; position:relative; color:#fff; }
.slot.booked:hover::after { content:"Ù…Ø­Ø¬ÙˆØ²"; position:absolute; top:-25px; left:50%; transform:translateX(-50%); background:#ffcc00; color:#111; padding:3px 6px; border-radius:5px; font-size:0.75rem; white-space:nowrap; }
.slot.selected { box-shadow:0 0 15px gold; border-color:gold; }
.slot.suggested { border:2px dashed gold; box-shadow:0 0 10px gold; animation: pulse 1s infinite alternate; }
@keyframes pulse { from { box-shadow:0 0 10px gold; } to { box-shadow:0 0 20px gold; } }

.booking-form .form-inner button { width:100%; margin-top:20px; padding:15px; background:gold; border:none; border-radius:8px; color:#111; font-weight:bold; cursor:pointer; transition:0.3s; display:block;}
.booking-form .form-inner button:hover { transform:translateY(-2px); box-shadow:0 0 20px rgba(255,204,0,0.7); }

footer { text-align:center; padding:20px; background:#222; margin-top:40px;}
</style>
</head>
<body>

<div class="top-logo">
    <img src="logo.jpg" alt="Logo" class="logo-img">
    <span class="logo-text">ØµØ§Ù„ÙˆÙ† Ù„Ù…Ø³Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©</span>
</div>

<header class="navbar">
    <ul class="nav-links">
        <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
        <li><a href="services.html">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a></li>
        <li><a href="prices.html">Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</a></li>
        <li><a href="booking.html">Ø§Ù„Ø­Ø¬Ø²</a></li>
        <li><a href="team.html">Ø§Ù„ÙØ±ÙŠÙ‚</a></li>
        <li><a href="contact.html">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a></li>
    </ul>
    <button class="menu-toggle"><i class="fas fa-bars"></i></button>
</header>

<div class="booking-form">
    <h2>Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ Ø§Ù„Ø¢Ù†</h2>
    <div class="form-inner">
        <label>Ø§Ø³Ù…Ùƒ:</label>
        <input type="text" id="name" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ">
        <label>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„:</label>
        <input type="text" id="phone" placeholder="05xxxxxxxx">
        <label>Ø§Ø®ØªØ± Ø§Ù„Ø­Ù„Ø§Ù‚:</label>
        <div class="barbers">
            <div class="barber-card" data-name="Ø§Ù„Ø³ÙŠØ¯"><img src="e.jpg" alt="Ø§Ù„Ø³ÙŠØ¯"><p>Ø§Ù„Ø³ÙŠØ¯</p></div>
            <div class="barber-card" data-name="Ù…Ø­Ù…Ø¯"><img src="m.jpg" alt="Ù…Ø­Ù…Ø¯"><p>Ù…Ø­Ù…Ø¯</p></div>
            <div class="barber-card" data-name="Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡"><img src="a.jpg" alt="Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡"><p>Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡</p></div>
            <div class="barber-card" data-name="Ø³Ù…ÙŠØ±"><img src="s3.jpg" alt="Ø³Ù…ÙŠØ±"><p>Ø³Ù…ÙŠØ±</p></div>
        </div>
        <label>Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®:</label>
        <input type="date" id="booking-date" required>
        <label>Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¹Ø¯:</label>
        <div class="timeslots" id="timeslots"></div>
        <p id="availability-msg">Ù‡Ø°Ø§ Ø§Ù„ÙˆÙ‚Øª Ù…Ø­Ø¬ÙˆØ²ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ÙˆÙ‚Øª Ø¢Ø®Ø±</p>

        <button onclick="sendBooking()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ø¬Ø² Ù„Ù„Ø­Ù„Ø§Ù‚</button>
        <button type="button" id="autoSelectBtn" style="margin-top:10px; background:#1E90FF; color:#fff;">Ø§Ø®ØªØ± Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§</button>
    </div>
</div>

<footer>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© ØµØ§Ù„ÙˆÙ† Ù„Ù…Ø³Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©</footer>

<script>
// ======= Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© =======
const topLogo=document.querySelector('.top-logo');
window.addEventListener('scroll',()=>{topLogo.classList.toggle('shrink',window.scrollY>50);});
const menuToggle=document.querySelector('.menu-toggle');
const navLinks=document.querySelector('.nav-links');
menuToggle.addEventListener('click',()=>navLinks.classList.toggle('show'));

let selectedBarber="";
let selectedTime="";
let bookedAppointments = { "Ø§Ù„Ø³ÙŠØ¯": [], "Ù…Ø­Ù…Ø¯": [], "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡": [], "Ø³Ù…ÙŠØ±": [] };

// ØªØ­Ù…ÙŠÙ„ ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
function loadBookingsFromStorage() {
    const saved = localStorage.getItem("barberBookings");
    if(saved) bookedAppointments = JSON.parse(saved);
}
function saveBookingsToStorage() { localStorage.setItem("barberBookings", JSON.stringify(bookedAppointments)); }
loadBookingsFromStorage();

// ======= Ø¶Ø¨Ø· Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„ØªØ§Ø±ÙŠØ® Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ =======
const bookingDateInput = document.getElementById("booking-date");
const today = new Date();
const yyyy = today.getFullYear();
const mm = String(today.getMonth() + 1).padStart(2, '0');
const dd = String(today.getDate()).padStart(2, '0');
bookingDateInput.min = `${yyyy}-${mm}-${dd}`;

// ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯
function generateTimeSlots(){
    const slots = [];
    for(let h=8; h<24; h++){
        if(h===8){ slots.push(`08:30`); } 
        else { slots.push(`${h.toString().padStart(2,'0')}:00`); slots.push(`${h.toString().padStart(2,'0')}:30`); }
    }
    for(let h=0; h<2; h++){ slots.push(`0${h}:00`); slots.push(`0${h}:30`); }
    return slots;
}

// ======= ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ =======
function highlightTimeSlots(){
    const container = document.getElementById("timeslots");
    container.innerHTML="";
    if(!selectedBarber) return;
    const slots = generateTimeSlots();
    const bookingDate = document.getElementById("booking-date").value;
    slots.forEach(time=>{
        const slotDiv=document.createElement("div");
        slotDiv.textContent=time;
        slotDiv.classList.add("slot");
        const isBooked = bookedAppointments[selectedBarber].some(b=>b.date===bookingDate && b.time===time);
        const hour=parseInt(time.split(":")[0]);
        if(hour >= 8 && hour < 12) slotDiv.style.background = "#FFE4B5";
        else if(hour >= 12 && hour < 18) slotDiv.style.background = "#FFD700";
        else if(hour >= 18 && hour < 24) slotDiv.style.background = "#FF8C00";
        else if(hour >=0 && hour <2) slotDiv.style.background = "#4B0082";
        slotDiv.style.color = (hour >=18 || hour<2) ? "#fff" : "#111";

        if(isBooked){ slotDiv.classList.add("booked"); slotDiv.addEventListener("click",()=>{ alert("Ù‡Ø°Ø§ Ø§Ù„ÙˆÙ‚Øª Ù…Ø­Ø¬ÙˆØ² Ø¨Ø§Ù„ÙØ¹Ù„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ÙˆÙ‚Øª Ø¢Ø®Ø±"); }); }
        else { slotDiv.classList.add("available"); slotDiv.addEventListener("click",()=>{ document.querySelectorAll('.slot').forEach(s=>s.classList.remove("selected")); slotDiv.classList.add("selected"); selectedTime=time; document.getElementById("availability-msg").style.display="none"; }); }
        container.appendChild(slotDiv);
    });
    suggestNextAvailable();
}

// ======= Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ù„Ø§Ù‚ =======
document.querySelectorAll('.barber-card').forEach(card=>{
    card.addEventListener('click',()=>{
        document.querySelectorAll('.barber-card').forEach(c=>c.classList.remove('selected'));
        card.classList.add('selected');
        selectedBarber=card.dataset.name;
        selectedTime="";
        highlightTimeSlots();
        document.getElementById("availability-msg").style.display="none";
    });
});

// ØªØºÙŠÙŠØ± Ø§Ù„ØªØ§Ø±ÙŠØ®
bookingDateInput.addEventListener("change", ()=>{
    selectedTime="";
    highlightTimeSlots();
});

// ======= Ø§Ù‚ØªØ±Ø§Ø­ Ø£Ù‚Ø±Ø¨ Ù…ÙˆØ¹Ø¯ =======
function suggestNextAvailable() {
    if(!selectedBarber) return;
    const bookingDate = document.getElementById("booking-date").value;
    if(!bookingDate) return;
    const slots = generateTimeSlots();
    for(const time of slots){
        const isBooked = bookedAppointments[selectedBarber].some(b=>b.date===bookingDate && b.time===time);
        if(!isBooked){
            document.querySelectorAll('.slot').forEach(s=>s.classList.remove("suggested"));
            const slotDiv = Array.from(document.querySelectorAll('.slot')).find(s=>s.textContent===time);
            if(slotDiv){ slotDiv.classList.add("suggested"); }
            break;
        }
    }
}

// ======= Ø²Ø± Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ =======
document.getElementById("autoSelectBtn").addEventListener("click", ()=>{
    const suggested = document.querySelector(".slot.suggested");
    if(suggested){ document.querySelectorAll('.slot').forEach(s=>s.classList.remove("selected")); suggested.classList.add("selected"); selectedTime = suggested.textContent; document.getElementById("availability-msg").style.display="none"; alert(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù…Ù‚ØªØ±Ø­: ${selectedTime}`); }
    else{ alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆØ¹Ø¯ Ù…Ù‚ØªØ±Ø­ Ù…ØªØ§Ø­ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…."); }
});

// ======= Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ø¬Ø² =======
function sendBooking(){
    const name=document.getElementById("name").value.trim();
    const phone=document.getElementById("phone").value.trim();
    const bookingDate = document.getElementById("booking-date").value;
    if(!name || !phone || !selectedBarber || !selectedTime || !bookingDate){ alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ù„Ø§Ù‚ ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ù…ÙˆØ¹Ø¯"); return; }
    const phoneRegex=/^05\d{8}$/;
    if(!phoneRegex.test(phone)){ alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ ØµØ­ÙŠØ­ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 05 ÙˆÙŠØªÙƒÙˆÙ† Ù…Ù† 10 Ø£Ø±Ù‚Ø§Ù…"); return; }
    if(!confirm("Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ø¬Ø² Ù„Ù„Ø­Ù„Ø§Ù‚ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ")) return;

    bookedAppointments[selectedBarber].push({ date: bookingDate, time: selectedTime });
    saveBookingsToStorage();
    highlightTimeSlots();

    const barberPhones={"Ø§Ù„Ø³ÙŠØ¯":"966548840672","Ù…Ø­Ù…Ø¯":"966565441337","Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡":"966546220113","Ø³Ù…ÙŠØ±":"966548840672"};
    const message=`ØµØ§Ù„ÙˆÙ† Ù„Ù…Ø³Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© - Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯

Ø§Ù„Ø§Ø³Ù…: ${name}
Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„: ${phone}
Ø§Ù„ØªØ§Ø±ÙŠØ®: ${bookingDate}
Ø§Ù„ÙˆÙ‚Øª: ${selectedTime}
Ø§Ù„Ø­Ù„Ø§Ù‚: *${selectedBarber}*

Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø±Ùƒ ØµØ§Ù„ÙˆÙ† Ù„Ù…Ø³Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© - ÙØ±Ø¹ Ø§Ù„Ø¶Ø§Ø­ÙŠ

ğŸ“ Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©: https://maps.app.goo.gl/DfD9iBAcELh5crNk7`;

    const barberPhone=barberPhones[selectedBarber];
    window.open(`https://wa.me/${barberPhone}?text=${encodeURIComponent(message)}`,'_blank');
    alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­!");
    document.getElementById("name").value="";
    document.getElementById("phone").value="";
    selectedTime="";
    highlightTimeSlots();
}

// Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
highlightTimeSlots();
</script>
</body>
</html>
